(function(k,g){k.getTweets=function(c){for(var d=/(https?:\/\/[^\s]+)/g,b=c.length,a=0;a<b;a++){var e=c[a].text.replace(d,"");j.push(e)}l.init(j)};var m=g.getElementsByTagName("head").item(0),h=g.createElement("script"),j=[];h.type="text/javascript";h.src="//api.twitter.com/1/statuses/user_timeline.json?screen_name=horse_ebooks&count=200&callback=getTweets";m.appendChild(h);var l={init:function(c){this.tweets=c;this.allElements=this.cacheElements("p h1 h2 h3 h4 h5 h6 li a div span".split(" "));this.allImages=
this.cacheElements(["img"]);this.replaceText();this.replaceImages()},cacheElements:function(c){for(var d=c.length,b=[];d--;)for(var a=g.getElementsByTagName(c[d]),e=a.length;e--;b.unshift(a[e]));return b},replaceText:function(){for(var c=this.allElements.length,d=0;d<c;d++){var b=this.allElements[d];if("undefined"!==typeof b.innerHTML){var a=b.innerHTML.length;4<a&&0===b.children.length&&(a=this.tweets.filter(this.checkLength(a)),b.innerHTML=a[Math.floor(Math.random()*a.length)])}}},replaceImages:function(){for(var c=
this.allImages.length,d=0;d<c;d++){var b=this.allImages[d];if(15<b.width&&15<b.height){var a=b.width,e=b.height,h=b.className,f=g.createElement("div");f.className=h;f.style.width=a+"px";f.style.height=e+"px";f.style.overflow="hidden";a=g.createElement("img");a.src="//www.heyben.com/horse_ebookmarklet/img/horse_ebookmarklet.jpg";a.style.width="100%";a.style.height="auto";b.parentNode.replaceChild(f,b);f.appendChild(a)}}},checkLength:function(c){136<c&&(c=136);return function(d){return d.length>=
c-4&&d.length<=c+4}}}})(window,document);