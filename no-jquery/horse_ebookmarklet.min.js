(function(){window.getTweets=function(a){for(var c=/(https?:\/\/[^\s]+)/g,b=a.length,d=0;d<b;d++){var e=a[d].text.replace(c,"");j.push(e)}k.init(j)};var l=document.getElementsByTagName("head").item(0),g=document.createElement("script"),j=[];g.type="text/javascript";g.src="//api.twitter.com/1/statuses/user_timeline.json?screen_name=horse_ebooks&count=200&callback=getTweets";l.appendChild(g);var k={init:function(a){this.tweets=a;this.allElements=this.cacheElements("p h1 h2 h3 h4 h5 h6 li a div span".split(" "));
this.allImages=this.cacheElements(["img"]);this.replaceText();this.replaceImages()},cacheElements:function(a){for(var c=a.length,b=[];c--;)for(var d=document.getElementsByTagName(a[c]),e=d.length;e--;b.unshift(d[e]));return b},replaceText:function(){for(var a=this.allElements.length,c=0;c<a;c++){var b=this.allElements[c],d=b.innerText.length;4<d&&0===b.children.length&&(d=this.tweets.filter(this.checkLength(d)),b.innerText=d[Math.floor(Math.random()*d.length)])}},replaceImages:function(){for(var a=
this.allImages.length,c=0;c<a;c++){var b=this.allImages[c];if(15<b.width&&15<b.height){var d=b.width,e=b.height,g=b.className,f=document.createElement("div"),h=document.createElement("img");h.src="http://www.heyben.com/horse_ebookmarklet/img/horse_ebookmarklet.jpg";f.className=g;f.style.width=d+"px";f.style.height=e+"px";f.style.overflow="hidden";b.parentNode.replaceChild(f,b);h.style.width="100%";h.style.height="auto";f.appendChild(h)}}},checkLength:function(a){136<a&&(a=136);return function(c){return c.length>=
a-4&&c.length<=a+4}}}})();